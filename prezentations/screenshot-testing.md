Screenshot testing

Playwright ммає вбудований assert toHaveScreenshot(name) Ця функція буде чекати, поки два скріншоти сторінки або елемента повернуть однаковий результат, а потім порівняє останній знімок з очікуванням.


await expect(page).toHaveScreenshot('image.png');

Playwright створить нову папку поруч з вашим тестом для зберігання скріншотів що використовуються в цьому тесті. Назва папки зазвичай має формат <назва-файлу-з-тестом>-snapshots. Ви можете перевизначити шлях у конфізі за допомогою опції snapshotPathTemplate.



Слід пам’ятати що при першому запуску ваш тест впаде бо у вас ще не буде скріншотів з якими треба порівнювати. Тому playwright створить їх для вас при пешому запуску тесту і всі наступні запуски будуть використовувати ці скріншоти з першого запуску для порівнняння. Тому не забувайте запушити ваші скріншоти в репозиторій. Це нормально оскільки вони необхідні для роботи тестів.


Також слід пам’ятати що playwright розділяє скріншоти на платформи. Тобто якщо ви працюєте на Mac OS а тести запускаєте на Windows то ваш тест впаде оскільки ваші скріншоти підходять тільки для Mac OS.

Більше інформації тут.https://playwright.dev/docs/api/class-pageassertions#page-assertions-to-have-screenshot-1